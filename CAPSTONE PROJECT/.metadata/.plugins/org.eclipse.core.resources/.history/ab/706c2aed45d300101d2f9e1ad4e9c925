<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Contact Us</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .msg-card { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 5px solid #007bff; }
        .reply-box { background: #d4edda; color: #155724; padding: 10px; margin-top: 10px; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>
<div class="container" style="width: 600px; margin-top: 30px;">
    <h2 style="text-align:center; color:#333;">ğŸ“ Contact Support</h2>
    
    <form action="/user/contact" method="post" style="background:white; padding:20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <label style="font-weight:bold;">New Message:</label>
        <textarea name="content" rows="3" required placeholder="How can we help you?" 
                  style="width:100%; padding:10px; margin-top:10px; border:1px solid #ccc; border-radius:4px;"></textarea>
        <button type="submit" style="margin-top:15px; width:100%; background-color:#007bff; color:white; padding:10px; border:none; border-radius:4px; cursor:pointer;">Send Message</button>
    </form>

    <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">ğŸ“ Your Message History</h3>
    
    <div th:if="${messages == null or messages.empty}" style="text-align:center; color:#888;">
        <p>No messages sent yet.</p>
    </div>

    <div th:each="msg : ${messages}" class="msg-card">
        <p><strong th:text="${msg.content}">User Message</strong></p>
        
        <div th:if="${msg.adminReply != null}" class="reply-box">
            <span>ğŸ‘¨â€ğŸ’¼ Admin: </span>
            <span th:text="${msg.adminReply}">Reply Content</span>
        </div>
        <div th:if="${msg.adminReply == null}" style="color: #999; font-style: italic; font-size: 0.9em;">
            (Waiting for reply...)
        </div>
    </div>
    
    <br>
    <a href="/user/dashboard" style="display:block; text-align:center; text-decoration:none; color:#555;">&larr; Back to Dashboard</a>
</div>
</body>
</html>